const pixel=32,chaPos={x:192,y:416},stage={w:640,h:480},boundInfo={w:704,h:544},doorInfo={x:576,y:448},wallInfo=[{num:5,x:128,y:416},{num:1,x:256,y:352},{num:10,x:320,y:320},{num:1,x:512,y:256},{num:1,x:480,y:224},{num:1,x:448,y:192},{num:1,x:416,y:160}],starInfo=[{x:160,y:384,exist:!0},{x:256,y:320,exist:!0},{x:608,y:288,exist:!0},{x:416,y:128,exist:!0},{x:640,y:480,exist:!0}],app=new PIXI.Application({background:"#1099bb",width:stage.w,height:stage.h});app.view.setAttribute("id","canvas"),document.body.appendChild(app.view);const scene=new PIXI.Container,bgTexture=PIXI.Texture.from("../image/bg.jpg"),bg1=new PIXI.Sprite(bgTexture),bg2=new PIXI.Sprite(bgTexture);bg1.position.set(0,0),bg2.position.set(640,0),app.stage.addChild(bg1),app.stage.addChild(bg2);const bounds=new PIXI.ParticleContainer,boundWidthNum=boundInfo.w/32,boundHeightNum=boundInfo.h/32,boundTexture=PIXI.Texture.from("../image/bound.jpg");for(let e=0;e<boundWidthNum;e++){let t=new PIXI.Sprite(boundTexture);t.position.set(32*e,0),bounds.addChild(t),t=new PIXI.Sprite(boundTexture),t.position.set(32*e,boundInfo.h-32),bounds.addChild(t)}for(let e=1;e<boundHeightNum-1;e++){let t=new PIXI.Sprite(boundTexture);t.position.set(0,32*e),bounds.addChild(t),t=new PIXI.Sprite(boundTexture),t.position.set(boundInfo.w-32,32*e),bounds.addChild(t)}scene.addChild(bounds);const doorCloseTexture=PIXI.Texture.from("../image/door_close.png"),doorClose=new PIXI.Sprite(doorCloseTexture);doorClose.position.set(doorInfo.x,doorInfo.y),scene.addChild(doorClose);const doorOpenTexture=PIXI.Texture.from("../image/door_open.png"),doorOpen=new PIXI.Sprite(doorOpenTexture);doorOpen.position.set(doorInfo.x,doorInfo.y),scene.addChild(doorOpen),doorOpen.visible=!1;let wallsGroup=[];const wallTexture=PIXI.Texture.from("../image/wall.jpeg");wallInfo.forEach((function(e){const t=new PIXI.ParticleContainer;for(let i=0;i<e.num;i++){const e=new PIXI.Sprite(wallTexture);e.position.set(32*i,0),t.addChild(e)}t.position.set(e.x,e.y),scene.addChild(t);const i={id:e.num,wall:t,isUp:!1,isRight:!1,isMiddle:!1};wallsGroup.push(i)}));const scoreNum=document.getElementById("score-number");let score=0,starGroup=[],starTexture=PIXI.Texture.from("../image/star.png");starInfo.forEach((function(e){const t=new PIXI.Sprite(starTexture);t.scale.set(.05,.05),t.position.set(e.x,e.y),scene.addChild(t);const i={star:t,exist:e.exist};starGroup.push(i)})),app.stage.addChild(scene);const atlasData={frames:{left1:{frame:{x:0,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32}},left2:{frame:{x:32,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32}},left3:{frame:{x:64,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32}},right1:{frame:{x:0,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32}},right2:{frame:{x:32,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32}},right3:{frame:{x:64,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32}}},meta:{image:"../image/cha.png",format:"RGBA8888",size:{w:96,h:128},scale:1},animations:{left:["left2","left3","left1"],right:["right2","right3","right1"]}},spritesheet=new PIXI.Spritesheet(PIXI.BaseTexture.from(atlasData.meta.image),atlasData);spritesheet.parse();const walkLeft=new PIXI.AnimatedSprite(spritesheet.animations.left),walkRight=new PIXI.AnimatedSprite(spritesheet.animations.right);walkLeft.animationSpeed=.1666,walkRight.animationSpeed=.1666;const stopRight=new PIXI.Sprite(spritesheet.textures.right2),stopLeft=new PIXI.Sprite(spritesheet.textures.left2),chara=new PIXI.Container;chara.addChild(stopRight),chara.addChild(stopLeft),chara.addChild(walkRight),chara.addChild(walkLeft),stopLeft.visible=!1,stopRight.visible=!1,walkLeft.visible=!1,walkRight.visible=!0,chara.position.set(chaPos.x,chaPos.y),app.stage.addChild(chara);const endScene=new PIXI.Container,successMsg=new PIXI.Container;let rectangle=new PIXI.Graphics;rectangle.lineStyle(4,16777215,1),rectangle.beginFill(4473924),rectangle.drawRoundedRect(0,0,320,192,10),rectangle.endFill(),successMsg.addChild(rectangle);let style=new PIXI.TextStyle({fontFamily:"Cubic",fontSize:36,fill:"white"}),message=new PIXI.Text("恭喜通關",style);message.position.set(80,80),successMsg.addChild(message),successMsg.position.set(160,96),endScene.addChild(successMsg),endScene.visible=!1,app.stage.addChild(endScene);